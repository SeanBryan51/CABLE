<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Documentation for CABLE">
    <meta name="author" content="CABLE community" >
    <link rel="icon" href="../favicon.png">

    <title>limit_HGT_LAI &ndash; CABLE</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/local.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

         <script src="../js/jquery-2.1.3.min.js"></script>
         <script src="../js/svg-pan-zoom.min.js"></script>

  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html">CABLE </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown hidden-xs visible-sm visible-md hidden-lg">
              <a href="#" class="dropdown-toggle"
                 data-toggle="dropdown" role="button"
                 aria-haspopup="true"
                 aria-expanded="false">
                 Contents <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                    <li><a href="../lists/files.html">Source Files</a></li>
                  <li><a href="../lists/modules.html">Modules</a></li>
                  <li><a href="../lists/procedures.html">Procedures</a></li>
                  <li><a href="../lists/types.html">Derived Types</a></li>
                  <li><a href="../lists/programs.html">Programs</a></li>
              </ul>
            </li>
                <li class="visible-xs hidden-sm visible-lg">
                  <a href="../lists/files.html">Source Files</a>
                </li>
              <li class="visible-xs hidden-sm visible-lg">
                <a href="../lists/modules.html">Modules</a>
              </li>
              <li class="visible-xs hidden-sm visible-lg">
                <a href="../lists/procedures.html">Procedures</a>
              </li>
              <li class="visible-xs hidden-sm visible-lg">
                <a href="../lists/types.html">Derived Types</a>
              </li>
              <li class="visible-xs hidden-sm visible-lg">
                <a href="../lists/programs.html">Programs</a>
              </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
  <div class="row">
    <h1>limit_HGT_LAI
      <small>Subroutine</small>
      
    </h1>
      <div class="row" id="info-bar">
    <div class="col-lg-12">
      <div class="well well-sm">
        <ul class="list-inline" style="margin-bottom:0px;display:inline">

          <li id="statements"><i class="fa fa-list-ol"></i>
            <a data-toggle="tooltip"
               data-placement="bottom" data-html="true"
               title=" 0.1% of total for procedures.">35 statements</a>
          </li>

            <li id="source-file">
              <i class="fa fa-code"></i>
              <a href="../src/cbl_LAI_canopy_height.F90"> Source File</a>
            </li>
        </ul>
        <ol class="breadcrumb in-well text-right">
              <li><a href='../sourcefile/cbl_lai_canopy_height.f90.html'>cbl_LAI_canopy_height.F90</a></li>
              <li><a href='../module/cbl_lai_canopy_height_mod.html'>cbl_LAI_canopy_height_mod</a></li>
          <li class="active">limit_HGT_LAI</li>
        </ol>
      </div>
    </div>
  </div>
  <script>
    $(function () {
    $('[data-toggle="tooltip"]').tooltip()
    })
  </script>

  </div>
  
  <div class="row">
    <div class="col-md-3 hidden-xs hidden-sm visible-md visible-lg">
      <div id="sidebar">
      <h3>Contents</h3>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  


  </div>

    </div>
    
    <div class="col-md-9" id='text'>
    <h2>public  subroutine limit_HGT_LAI(HGT_pft_temp, LAI_pft_cbl, HGT_pft_cbl, mp, land_pts, ntiles, tile_pts, tile_index, tile_frac, L_tile_pts, LAI_pft, HGT_pft, Clai_thresh)  
</h2>
    

    <h2>Purpose</h2>
<p>This SUBROUTINE checks that input values of leaf area and canopy height
 lie between set values (defined by PFT) and overwrites if necessary.
 These limits are needed to ensure that the canopy roughness properties of
 the land point are well behaved (see <a href="../proc/ruff_resist.html">ruff_resist</a>).</p>
<p>The mapping from grid cells (land_pts,ntiles) to the (mp) structure
 is also undertaken.</p>
<p><strong>This SUBROUTINE is active when CABLE is run within a coupled model
 (i.e. ACCESS)</strong> </p>
<h2>Method</h2>
<p>The cell-level input (land_pts,ntile) variables for leaf area <code>LAI_pft</code> and
 canopy height <code>HGT_pft</code> are checked for</p>
<ul>
<li>whether the land_pt has a non-zero fraction of that tile (if zero
   fraction then LAI and canopy height are set to zero)</li>
<li>whether the LAI lies above a minimum value <code>CLAI_thresh</code></li>
<li>whether the canopy height lies above a minimum value (which is PFT dependent)</li>
<li>whether non-vegetated tiles have a non-zero canopy height.</li>
</ul>
<p>Outputs are <code>LAI_pft_cbl</code> and <code>HGT_pft_cbl</code></p>
<p><strong>WARNINGS</strong></p>
<ul>
<li>INTENT statements need to be added to the argument lists</li>
<li>hardwired indexing is used throughout.  This SUBROUTINE assumes that<ol>
<li>non-vegetated tiles take indexes 14 and onwards</li>
<li>tall vegetation occupies tile indexes 1-4</li>
<li>other vegetation (shrubs/grasses/crops/wetlands) occupy tile indexes
 5-13</li>
</ol>
</li>
<li>the limits on canopy height are hardwired<ol>
<li>canopy height for tall vegetation is limited to be greater than 1m</li>
<li>canopy height for other vegetation is limited to be greater than 0.1m</li>
</ol>
</li>
</ul>


    <h3>Arguments</h3>
        <table class="table table-striped varlist">
    <thead>
      <tr>
        <th>Type</th>
<th>Intent</th><th>Optional</th>        <th>Attributes</th>
        <th></th>
        <th>Name</th>
        <th></th>
    </thead>
    <tbody>
        <tr>
            <td>
              <span class="anchor" id="variable-hgt_pft_temp"></span>
              real
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>HGT_pft_temp</strong>(land_pts,ntiles)</td>
            <td>
                <p>OUT adjusted canopy height in (land_pts,ntile) form (m)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-lai_pft_cbl"></span>
              real
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>LAI_pft_cbl</strong>(mp)</td>
            <td>
                <p>OUT adjusted leaf area in (mp) form (m<script type="math/tex">^2</script>m<script type="math/tex">^{-2}</script>)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-hgt_pft_cbl"></span>
              real
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>HGT_pft_cbl</strong>(mp)</td>
            <td>
                <p>OUT adjusted canopy height in (mp) form (m)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-mp~5"></span>
              integer
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>mp</strong></td>
            <td>
                <p>total number of tiles carried by land vector (-)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-land_pts"></span>
              integer
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>land_pts</strong></td>
            <td>
                <p>number of land points, max number of tiles that can be carried in any land point (-)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-ntiles"></span>
              integer
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>ntiles</strong></td>
            <td>
                <p>number of land points, max number of tiles that can be carried in any land point (-)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-tile_pts"></span>
              integer
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>tile_pts</strong>(ntiles)</td>
            <td>
                <p>number of land_pts in the array that include an active tile of a particular tile type (-) </p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-tile_index"></span>
              integer
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>tile_index</strong>(land_pts,ntiles)</td>
            <td>
                <p>specifies the tile types within each land point (-)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-tile_frac"></span>
              real
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>tile_frac</strong>(land_pts,ntiles)</td>
            <td>
                <p>fraction of cell assigned to each tile (-)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-l_tile_pts"></span>
              logical
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>L_tile_pts</strong>(land_pts,ntiles)</td>
            <td>
                <p>switch to denote whether a tile is active (-)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-lai_pft"></span>
              real
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>LAI_pft</strong>(land_pts,ntiles)</td>
            <td>
                <p>IN leaf area (m<script type="math/tex">^2</script>m<script type="math/tex">^{-2}</script>)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-hgt_pft"></span>
              real
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>HGT_pft</strong>(land_pts,ntiles)</td>
            <td>
                <p>IN canopy height (m)</p>
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="variable-clai_thresh"></span>
              real
            </td>
<td></td>
              <td></td>            <td>
              
            </td>
            <td>::</td>
            <td><strong>Clai_thresh</strong></td>
            <td>
                <p>The minimum LAI below which a tile is considered to be NOT vegetated (m<script type="math/tex">^2</script>m<script type="math/tex">^{-2}</script>)</p>
            </td>
        </tr>
    </tbody>
  </table>

    <br>

    <section class="visible-xs visible-sm hidden-md">
        <h3>Contents</h3>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  


    </section>
    <br class="visible-xs visible-sm hidden-md">


    
    

    
    


    
    
    </div>
  </div>

      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-xs-6 col-md-6"><p>CABLE was developed by CABLE community<br>&copy; 2023 
</p>
          </div>
          <div class="col-xs-6 col-md-6">
            <p class="text-right">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
            </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>

    <!-- Bootstrap core JavaScript
         ================================================== -->
         <!-- Placed at the end of the document so the pages load faster -->
    <!--
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        -->
        <script src="../js/bootstrap.min.js"></script>
        <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
        <script src="../js/ie10-viewport-bug-workaround.js"></script>

        <!-- MathJax JavaScript
             ================================================== -->
             <!-- Placed at the end of the document so the pages load faster -->
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
          TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
          jax: ['input/TeX','input/MathML','output/HTML-CSS'],
          extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']
          });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  </body>
</html>